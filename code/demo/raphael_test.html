<!DOCTYPE html>
<html>
<head>
<meta charset="gb2312" />
<title>´úÂë¿â</title>
<link rel="shortcut icon" type="image/x-icon" href="/common/f.ico" />
<link rel="stylesheet" href="/common/base.css" />
<link rel="stylesheet" href="../demo.css" />
</head>
<body>
<div class="u-wrap">
	<div class="paper" id="paper"></div>
	<div class="code fn-mt20">
<xmp><script src="http://fwowo.com/common/raphael-min.js"></script>
<script>
$("#paper").height(400);
var pagerWidth = $("#paper").width();
var pagerHeight = $("#paper").height();
var paper = new Raphael("paper", pagerWidth, pagerHeight);
var coords = [
	{x: 100, y: 100},
	{x: 200, y: 100},
	{x: 200, y: 200},
	{x: 100, y: 200}
];

var pathVal = function(){
	var path_val = "";
	$.each(coords, function(){
		if (path_val == "") {
			path_val = "M" + this.x + " " + this.y;
		} else {
			path_val += "L" + this.x + " " + this.y;
		}
	});
	path_val += "Z";
	return path_val;
};
var path = paper.path(pathVal()).attr("fill", "url(../img/raphael.png)");

$.each(coords, function(index){
	var _this = this;
	var _thisX = _this.x;
	var _thisY = _this.y;
	var dot = paper.circle(this.x, this.y, 5).attr({
		stroke: "#f60",
		fill: "#f60",
		cursor: "hand"
	}).drag(
		function(dx, dy){
			newX = _thisX + dx;
			if (newX < 0) newX = 0;
			if (newX > pagerWidth) newX = pagerWidth;
			newY = _thisY + dy;
			if (newY < 0) newY = 0;
			if (newY > pagerHeight) newY = pagerHeight;
			this.attr({
				cx: newX,
				cy: newY
			});
			_this.x = newX;
			_this.y = newY;
			path.attr("path", pathVal());
		},
		function(){},
		function(){
			_thisX = newX;
			_thisY = newY;
		}
	);
});
</script></xmp>
	</div>
</div>
<script src="/common/jquery-1.9.0.min.js"></script>
<script src="/common/raphael-min.js"></script>
<script>
$("#paper").height(400);
var pagerWidth = $("#paper").width();
var pagerHeight = $("#paper").height();
var paper = new Raphael("paper", pagerWidth, pagerHeight);
var coords = [
	{x: 100, y: 100},
	{x: 200, y: 100},
	{x: 200, y: 200},
	{x: 100, y: 200}
];

var pathVal = function(){
	var path_val = "";
	$.each(coords, function(){
		if (path_val == "") {
			path_val = "M" + this.x + " " + this.y;
		} else {
			path_val += "L" + this.x + " " + this.y;
		}
	});
	path_val += "Z";
	return path_val;
};
var path = paper.path(pathVal()).attr("fill", "url(../img/raphael.png)");

$.each(coords, function(index){
	var _this = this;
	var _thisX = _this.x;
	var _thisY = _this.y;
	var dot = paper.circle(this.x, this.y, 5).attr({
		stroke: "#f60",
		fill: "#f60",
		cursor: "hand"
	}).drag(
		function(dx, dy){
			newX = _thisX + dx;
			if (newX < 0) newX = 0;
			if (newX > pagerWidth) newX = pagerWidth;
			newY = _thisY + dy;
			if (newY < 0) newY = 0;
			if (newY > pagerHeight) newY = pagerHeight;
			this.attr({
				cx: newX,
				cy: newY
			});
			_this.x = newX;
			_this.y = newY;
			path.attr("path", pathVal());
		},
		function(){},
		function(){
			_thisX = newX;
			_thisY = newY;
		}
	);
});
</script>
</body>
</html>